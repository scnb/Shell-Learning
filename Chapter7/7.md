数组
====

Shell语言支持数组，提供了包括数组的定义、访问，以及删除等在内的一系列的操作。

## 1.定义数组

所谓数组，是指将具有**相同类型**的若干变量按照一定的顺序组织起来的一种数组类型。

### 1.通过指定元素值来定义数组

在Shell中，用户可以通过直接指定数组中的元素值来定义一个新的数组变量，基本语法：

    array[key]=value

array是数组的名称，key是数组的索引，通常是整数，value表示key所对应的数组元素的值。

Shell中的数组的下标（索引）从0开始。

### 2.通过declare语句定义数组

使用declare语句定义数组的语法如下：

    declare -a array

-a选项表明后面定义的是一个数组

**Note**：在Shell中，所有的变量都不必定义就可以用作数组。

在某种意义上讲，所有的变量都是数组，而且赋值给没有下标的变量与赋值给下标为0的数组效果是相同的。

例如：

    echo $array     实际上访问的是第一个元素

### 3.通过元素值集合定义数组

在某些情况下，用户可能需要一次性为数组的所有元素提供一个值。

基本语法如下：

    array=( v0 v1 v2 …… vn )

array表示数组名称，圆括号内是元素值集合，按一定的顺序排列，之间用**空格**分开。

这些值的索引从0开始。

### 4.通过键值对定义数组

实际上，在Shell中，数组元素的索引并不一定是连续的。

当用户需要定义索引不连续的数组时，需要显示指定要赋值的数组元素。

基本语法如下：

    array=([0]=value0 [1]=value1 [2]=value2 …… [n]=valuen)

array表示数组名，圆括号内是数组元素的索引及其值。

方括号内是元素的索引，它和它对应的值之间用等号隔开。

#### 关联数组

实际上，Shell中的数组的索引不仅仅是数字，还可以是字符串，这称为关联数组。

在使用关联数组时，需要首先使用declare语句来声明数组，然后再通过键值对的形式为数组元素提供值。


### 5.数组和普通变量

在Shell中，所有的普通变量实际上都可以当做数组变量来使用。

对普通变量操作与对相同名称的下标为0的元素的操作是等效的。

## 2.数组的赋值

### 1.按索引为元素赋值

按索引赋值是最基本的赋值方法：

    array[n]=value_n

以上语法将索引为n的元素赋值为value_n

### 2.通过集合为数组赋值

通过集合为数组赋值与通过集合定义数组的语法完全相同。

当为某个数组提供一组值时，Shell会从第1个元素开始，依次将这些值赋给每个元素。

①新的值的个数超过原来的值的个数，Shell会在数组末尾追加新的元素

②新的值的个数少于原来的值的个数，Shell会将新的值从第1个元素开始赋值，然后删除超出的元素。

**Note**：当使用值集合时，如果某个值中含有空格，则需要使用引号将其括起来，以防止被当做多个元素。

### 3.在数组末尾追加新元素

在通过索引为数组元素赋值时，如果指定的索引不存在，则Shell会自动添加一个新的元素，并且将指定的值赋给该元素。

### 4.通过循环为数组元素赋值

通过一个循环语句逐个为数组的每个元素赋值。

在循环执行的过程中，Shell会逐个向数组array末尾追加元素，病赋予新的值。

## 3.访问数组

### 1.访问第一个数组元素——通过访问数组名

直接使用数组名来访问数组时，访问的是数组的第一个元素。

### 2.通过下标访问数组元素

    array[n]

在Shell中，下标从0开始。

### 3.计算数组的长度

用户可以通过特殊操作符$#来获得数组长度。

    ${#array[@]}

    ${#array[*]}

*和@是通配符，表示匹配所有的元素。

还可以通过$#操作符，获取某个数组元素的长度。

    ${#array[n]}

### 4.通过循环便利数组元素

使用for循环结构时要预先知道数组的长度，所以要先获取数组的长度。

    len="${#array[@]}"

### 5.引用所有的数组元素

当用户使用@或者*引用所有的数组元素时，Shell会将所有的数组元素的值列举出来，这些值之间用空格隔开。

### 6.以切片方式获取部分数组元素

所谓**切片**，是指截取数组的部分元素或者某个元素的部分内容。

切片的基本语法如下：

    ${array [@|*]:start:length}

array表示数组名；方括号中的@和#都是通配符，两者只能选择一个。

start参数表示起始元素的下标；length表示要截取的数组元素的个数。

通过上面的方式，得到的是一个字符串，而不是数组。

可以将这个切片赋给其他变量：

    var=${array [@]:start:length}

某些情况下，用户可能希望切片得到的结果是数组，这时可以通过加圆括号来实现：

    (${array[@]:start:length})

另外，还可以对数组中**某个元素**进行切片：

    ${array[n]:start:length}

### 7.数组元素的替换

所谓数组替换，是指将某个数组元素的部分内容用其他的字符串来代替，但是并不影响原来的数组的值。

基本语法如下：

    ${array[@|*]/pattern/replacement}

array表示要操作的数组的名称；pattern参数表示要搜索的字符串；replacement参数表示用来替换的字符串。

注意，上面没有加圆括号，得到的是一个字符串变量，如果想要得到数组，则需要加字符串如下：

    (${array[@]/pattern/replacement})

另外，使用上述语句后，原数组并不会改变，除非将改变后的数组重新赋值给原数组。

## 4.删除数组

### 1.删除某个元素

    unset array[n]

### 2.删除整个数组

     unset array

## 5.数组的其他操作

### 1.复制属猪

所谓复制数组，是指创建一个原有数组的副本。

    newarray=("${array[@]})"

### 2.连接数组

连接数组是指将2个数组的数组元素连接在一起，变成一个大的数组。

在执行数组连接时，参与连接的数组之间要保留1个空格。

    ("${array1[@]}" "${array2[@]}")

### 3.加载文件内容到数组

用户可以将普通的文本文件的内容直接加载到数组中，文件的每一行构成一个元素的内容。

